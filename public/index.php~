<?php
require '../vendor/Mini/Mini.php';
require '../vendor/Mini/Encurtador.php';
use \Mini\Mini,
    Mini\Encurtador;   

$url_request = $_SERVER['REQUEST_URI'];
define('APPLICATION_PATH', $_SERVER['APPLICATION_PATH']);

$url = substr_replace($url_request, '', 0, strlen(APPLICATION_PATH));

$mini = new Mini();

$mini->get('/', function (){
    
    include '../app/view/home.php';
    
});

$mini->post('/', function(){
    $encurtador = new Encurtador();
    $shorten =  $encurtador->setUrl($_POST['url']);
    $recurso = $encurtador->getRecurso();
    $acessos = $recurso->getAcessos();
    include '../app/view/shorten.php';
});


$mini->get('/oi', function (){
    echo 'Hi2';
});

$mini->run($url);